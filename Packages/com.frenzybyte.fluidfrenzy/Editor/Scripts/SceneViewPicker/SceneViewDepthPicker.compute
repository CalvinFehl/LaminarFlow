// Each #kernel tells which function to compile; you can have many kernels
#pragma kernel CSMain

#include "HLSLSupport.cginc"

Texture2D<float4> _CameraDepthTexture;
RWStructuredBuffer<float4> _Buffer;

float2 _ScreenPos;

[numthreads(1,1,1)]
void CSMain (uint3 id : SV_DispatchThreadID)
{
	float4 d = _CameraDepthTexture[(int2)_ScreenPos];

#if !UNITY_REVERSED_Z
	d = d * 2 - 1;
#endif
	_Buffer[0] = float4(_ScreenPos.x, _ScreenPos.y, d.x,1);
}
